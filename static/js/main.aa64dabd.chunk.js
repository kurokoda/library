(this.webpackJsonplibrary=this.webpackJsonplibrary||[]).push([[0],{28:function(e,n,t){},34:function(e,n,t){},35:function(e,n,t){},66:function(e,n,t){},67:function(e,n,t){},68:function(e,n,t){},70:function(e,n,t){"use strict";t.r(n);t(27),t(28);var a=t(2),o=t.n(a),c=t(24),r=t.n(c),i=t(9),s=t.n(i),u=t(11),l=t(8),b=(t(34),t(35),t(71)),d=t(25),j=t.n(d),h=t(26),f=t.n(h),O={};function g(){return(g=Object(u.a)(s.a.mark((function e(n){var t,a,o,c,r,i,u=arguments;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=u.length>1&&void 0!==u[1]?u[1]:1,a=n.toLowerCase().split(" ").join("+"),o=a.concat("+page+".concat(t)),O[o]){e.next=18;break}return console.log("Requesting ".concat(o," from api")),O[o]={isLoading:!0},c="https://openlibrary.org/search.json?q=".concat(a,"&page=").concat(t),e.next=9,j.a.get(c);case 9:return r=e.sent,i=r.data.docs.map((function(e){return e.uuid=f.a.generate(),e})),r.books=i,r.count=r.data.numFound,r.isLoading=!1,O[o]=r,e.abrupt("return",O[o]);case 18:if(!O[o]||O[o].isLoading){e.next=23;break}return console.log("Returning ".concat(o," from cache")),e.abrupt("return",O[o]);case 23:return console.log("Url request is in process"),e.abrupt("return",void 0);case 25:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var k=function(e){return g.apply(this,arguments)},v=function(e){return e.length>30&&(e=e.slice(0,27)+"..."),e},x=t(1),p=function(e){var n=e.book,t=e.isLoading,a=e.isSaved,o=e.label,c=e.labelSaved,r=e.onButtonClick,i=n.author_name&&n.author_name.length?n.author_name[0]:n.author_name?n.author_name:"",s=n.title||"",u=v(i),l=v(s);return Object(x.jsxs)("div",{className:"library__book",children:[Object(x.jsx)("h6",{children:l}),Object(x.jsx)("p",{children:u}),Object(x.jsx)(b.a,{disabled:t,onClick:function(){r(n)},children:a?c:o})]})};p.defaultProps={isLoading:!1,isSaved:!1,labelSaved:null};var m=p,L=(t(66),t(67),t(72)),S=t(73),y=t(74),C=function(e){var n=e.count,t=e.countPerPage,o=e.isLoading,c=e.onPageChange,r=Object(a.useState)(1),i=Object(l.a)(r,2),s=i[0],u=i[1],b=Math.ceil(n/t);return Object(a.useEffect)((function(){c(s)}),[s,c]),Object(x.jsxs)(L.a,{size:"sm","aria-label":"Page navigation example",children:[Object(x.jsx)(S.a,{disabled:o||1===s,children:Object(x.jsx)(y.a,{onClick:function(){u(1)},first:!0})}),Object(x.jsx)(S.a,{disabled:o||1===s,children:Object(x.jsx)(y.a,{onClick:function(){s>1&&u(s-1)},previous:!0})}),Object(x.jsx)(S.a,{children:Object(x.jsxs)("div",{className:"library__pagination-label",children:["Page ",s," of ",b]})}),Object(x.jsx)(S.a,{disabled:o||s===b,children:Object(x.jsx)(y.a,{onClick:function(){s<b&&u(s+1)},next:!0})}),Object(x.jsx)(S.a,{disabled:o||s===b,children:Object(x.jsx)(y.a,{onClick:function(){u(b)},last:!0})})]})};C.defaultProps={isLoading:!1};var _=C,P=function(e){var n=e.books,t=e.buttonLabel,a=e.buttonLabelSaved,o=e.count,c=e.isLoading,r=e.savedBooks,i=e.label,s=e.onBookButtonClick,u=e.onPageChange;return Object(x.jsxs)("div",{className:"library__books-container",children:[Object(x.jsx)("h3",{children:i}),o?Object(x.jsxs)(x.Fragment,{children:[Object(x.jsx)("div",{className:"library__books-container-content",children:o&&Object(x.jsx)(_,{count:o,countPerPage:100,isLoading:c,onPageChange:u})}),Object(x.jsx)("div",{className:"library__books-container-books",children:n.map((function(e,n){var o="library-book-".concat(n),i=r&&r[e.uuid];return Object(x.jsx)(m,{book:e,isLoading:c,isSaved:i,label:t,labelSaved:a,onButtonClick:s},o)}))})]}):Object(x.jsx)("div",{children:"No Data"})]})};P.defaultProps={books:[],buttonLabelSaved:null,count:0,savedBooks:null};var B=P,w=(t(68),t(75)),N=t(76),R=t(77),E=function(e){var n=e.onClear,t=e.isLoading,o=e.onSubmit,c=Object(a.useState)(""),r=Object(l.a)(c,2),i=r[0],s=r[1];return Object(x.jsxs)(x.Fragment,{children:[Object(x.jsx)("h2",{children:"Search For Your Books"}),Object(x.jsx)("div",{className:"library__search-container",children:Object(x.jsxs)(w.a,{children:[Object(x.jsx)(N.a,{onKeyDown:function(e){13===e.keyCode&&i&&""!==i&&o(i)},onChange:function(e){s(e.target.value)},placeholder:"Enter a search term",value:i}),Object(x.jsx)(R.a,{addonType:"append",children:Object(x.jsx)(b.a,{disabled:t,onClick:function(){i&&o(i)},children:"Search"})}),Object(x.jsx)(R.a,{addonType:"append",children:Object(x.jsx)(b.a,{color:"danger",disabled:t,onClick:function(){s(""),n()},children:"X"})})]})})]})};E.defaultProps={isLoading:!1};var F=E,q=function(){var e=Object(a.useState)({books:[],count:0}),n=Object(l.a)(e,2),t=n[0],o=n[1],c=Object(a.useState)(!1),r=Object(l.a)(c,2),i=r[0],b=r[1],d=Object(a.useState)({}),j=Object(l.a)(d,2),h=j[0],f=j[1],O=Object(a.useState)(1),g=Object(l.a)(O,2),v=g[0],p=g[1],m=Object(a.useState)(""),L=Object(l.a)(m,2),S=L[0],y=L[1],C=Object(a.useState)({books:[],count:0}),_=Object(l.a)(C,2),P=_[0],w=_[1];return Object(a.useEffect)((function(){S&&""!==S&&function(){var e=Object(u.a)(s.a.mark((function e(){var n;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return b(!0),e.next=3,k(S,v);case 3:n=e.sent,b(!1),n&&w(n);case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()()}),[v,S]),Object(x.jsxs)("main",{className:"library__main",children:[Object(x.jsx)(F,{isLoading:i,onClear:function(e){y(""),w({books:[],count:0})},onSubmit:function(e){y(e)}}),Object(x.jsx)(B,{count:P.count,books:P.books,buttonLabel:"Save to Library",buttonLabelSaved:"Remove from Library",isLoading:i,label:"Search Results",onBookButtonClick:function(e){var n;h[e.uuid]?(delete h[e.uuid],n=t.books.filter((function(n){return n.uuid!==e.uuid}))):(h[e.uuid]=!0,n=t.books.concat([e]));var a={count:n.length,books:n};f(h),o(a)},onPageChange:function(e){p(e)},savedBooks:h}),Object(x.jsx)(B,{books:t.books,buttonLabel:"Return to Library",isLoading:i,label:"Your Bookshelf",onBookButtonClick:function(e){var n;delete h[e.uuid];var a={count:(n=t.books.filter((function(n){return n.uuid!==e.uuid}))).length,books:n};f(h),o(a)},onPageChange:function(e){}})]})};r.a.render(Object(x.jsx)(o.a.StrictMode,{children:Object(x.jsx)(q,{})}),document.getElementById("root"))}},[[70,1,2]]]);
//# sourceMappingURL=main.aa64dabd.chunk.js.map